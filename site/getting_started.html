<!DOCTYPE html>
<html class="no-js" lang="">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <title>1.0.0-alpha.7</title>
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link rel="stylesheet" href="./main.css?v=1.0.0-alpha.7" />
    <script src="./main.umd.js?v=1.0.0-alpha.7"></script>
    <link
      class="favicon"
      rel="shortcut icon"
      href="./favicon.ico"
      type="image/x-icon"
    />
    <!--<meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';">-->
  </head>
  <body>
    <div id="app">
      <main>
        <h1 id="getting-started"><a href="#getting-started" aria-hidden="true"><span class="toc-link"><span class="icono-chain"></span></span></a>Getting started</h1>
<h2 id="basic-usage"><a href="#basic-usage" aria-hidden="true"><span class="toc-link"><span class="icono-chain"></span></span></a>Basic usage</h2>
<p>main.js:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { hsr } <span class="hljs-keyword">from</span> <span class="hljs-string">"sosse"</span>;

hsr({
  <span class="hljs-comment">// Used as a prefix to resolve other configuration paths</span>
  <span class="hljs-attr">base</span>: __dirname,
  <span class="hljs-comment">// Will be called on file changes</span>
  <span class="hljs-attr">main</span>: <span class="hljs-function"><span class="hljs-params">()</span> =></span> <span class="hljs-built_in">require</span>(<span class="hljs-string">"./server"</span>).default()
})</code></pre>
<p>server.js:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> () {
  <span class="hljs-comment">// Called before previous server is stopped</span>
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"preparation"</span>)

  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-params">()</span> =></span> {
    <span class="hljs-comment">// Called if the preparation was successfully executed and then only after the previous server is shutdown</span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"start"</span>)

    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-params">()</span> =></span> {
      <span class="hljs-comment">// Called after the next preparation was successfully executed</span>
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"stop"</span>)
    }
  }
}</code></pre>
<h2 id="watch-custom-directories"><a href="#watch-custom-directories" aria-hidden="true"><span class="toc-link"><span class="icono-chain"></span></span></a>Watch custom directories</h2>
<pre><code class="hljs language-js">hsr({
  <span class="hljs-attr">base</span>: __dirname,
  <span class="hljs-comment">// Custom watch paths, relative to base (default: ["."])</span>
  <span class="hljs-attr">watch</span>: [<span class="hljs-string">"routes"</span>, <span class="hljs-string">"views"</span>]
})</code></pre>
<h2 id="basic-express-server-example"><a href="#basic-express-server-example" aria-hidden="true"><span class="toc-link"><span class="icono-chain"></span></span></a>Basic Express server example</h2>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> express <span class="hljs-keyword">from</span> <span class="hljs-string">"express"</span>;

globalThis.count = globalThis.count || <span class="hljs-number">1</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> () => {
  <span class="hljs-keyword">const</span> app = express();
  app.get(<span class="hljs-string">"/"</span>, (req, res) =>
    res.send(<span class="hljs-string">`&#x3C;h1>hey visitor <span class="hljs-subst">${globalThis.count++}</span>&#x3C;/h1>`</span>)); 

  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-params">()</span> =></span> {
    <span class="hljs-keyword">const</span> port = <span class="hljs-number">8080</span>;
    <span class="hljs-keyword">const</span> server = app.listen(port);

    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Started http://localhost:<span class="hljs-subst">${port}</span>`</span>);

    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-params">()</span> =></span>
      <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">res, rej</span>) =></span> server.close(<span class="hljs-function">(<span class="hljs-params">e</span>) =></span> (e ? rej(e) : res())));
  };
};</code></pre>
<h2 id="complete-express-server-example"><a href="#complete-express-server-example" aria-hidden="true"><span class="toc-link"><span class="icono-chain"></span></span></a>Complete Express server example</h2>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> http <span class="hljs-keyword">from</span> <span class="hljs-string">"http"</span>;
<span class="hljs-keyword">import</span> express <span class="hljs-keyword">from</span> <span class="hljs-string">"express"</span>;
<span class="hljs-keyword">import</span> { html, notFoundHtml, devSocket, useCtx } <span class="hljs-keyword">from</span> <span class="hljs-string">"sosse"</span>;
<span class="hljs-keyword">import</span> { h } <span class="hljs-keyword">from</span> <span class="hljs-string">"preact"</span>;
<span class="hljs-keyword">import</span> render <span class="hljs-keyword">from</span> <span class="hljs-string">"preact-render-to-string"</span>;

globalThis.count = globalThis.count || <span class="hljs-number">1</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> () => {
  <span class="hljs-keyword">const</span> ctx = useCtx();

  <span class="hljs-keyword">const</span> app = express();

  <span class="hljs-comment">// Home route</span>
  app.get(<span class="hljs-string">"/"</span>, (req, res) =>
    res.send(
      html({
        <span class="hljs-attr">body</span>: render(<span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">h1</span>></span>hey visitor {globalThis.count++}<span class="hljs-tag">&#x3C;/<span class="hljs-name">h1</span>></span></span>),
        ctx,
      })
    )
  );

  <span class="hljs-comment">// 404 route</span>
  app.use(<span class="hljs-function">(<span class="hljs-params">req, res</span>) =></span> res.status(<span class="hljs-number">404</span>).send(notFoundHtml()));

  <span class="hljs-keyword">const</span> port = <span class="hljs-number">8080</span>;
  <span class="hljs-keyword">const</span> server = http.createServer(app);

  <span class="hljs-keyword">await</span> devSocket({ server });

  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-params">()</span> =></span> {
    server.listen(port);

    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Started http://localhost:<span class="hljs-subst">${port}</span>`</span>);

    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-params">()</span> =></span>
      <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">res, rej</span>) =></span> server.close(<span class="hljs-function">(<span class="hljs-params">e</span>) =></span> (e ? rej(e) : res())));
  };
};</code></pre>

      </main>
    </div>

    <script>
      var $ = document.querySelectorAll.bind(document)
      new malleryFront.App($('#app')[0], {
 "config": {
  "colors": {
   "accent": "#00BF63"
  },
  "title": "sosse",
  "footer": {
   "html": ""
  }
 },
 "toc": {
  "items": [
   {
    "ext": ".md",
    "isDir": false,
    "path": "index.html",
    "name": "README.md",
    "title": "sosse",
    "level": 0,
    "id": 0,
    "htmlPath": "raw/index.html",
    "baseUrl": "./",
    "chapters": {
     "root": [
      0
     ],
     "items": [
      {
       "level": "1",
       "heading": "ðŸ¥£ Sosse",
       "hash": "ðŸ¥£-sosse",
       "children": [
        1
       ],
       "id": 0
      },
      {
       "level": "2",
       "heading": "Features:",
       "hash": "features",
       "children": [],
       "id": 1
      }
     ]
    },
    "hasContent": true
   },
   {
    "ext": ".md",
    "isDir": false,
    "path": "getting_started.html",
    "name": "getting_started.md",
    "level": 0,
    "id": 1,
    "htmlPath": "raw/getting_started.html",
    "baseUrl": "./",
    "title": "Getting Started",
    "chapters": {
     "root": [
      0
     ],
     "items": [
      {
       "level": "1",
       "heading": "Getting started",
       "hash": "getting-started",
       "children": [
        1,
        2,
        3,
        4
       ],
       "id": 0
      },
      {
       "level": "2",
       "heading": "Basic usage",
       "hash": "basic-usage",
       "children": [],
       "id": 1
      },
      {
       "level": "2",
       "heading": "Watch custom directories",
       "hash": "watch-custom-directories",
       "children": [],
       "id": 2
      },
      {
       "level": "2",
       "heading": "Basic Express server example",
       "hash": "basic-express-server-example",
       "children": [],
       "id": 3
      },
      {
       "level": "2",
       "heading": "Complete Express server example",
       "hash": "complete-express-server-example",
       "children": [],
       "id": 4
      }
     ]
    },
    "hasContent": true
   },
   {
    "ext": ".md",
    "isDir": false,
    "path": "CHANGELOG.html",
    "name": "CHANGELOG.md",
    "title": "Changelog",
    "level": 0,
    "id": 2,
    "htmlPath": "raw/CHANGELOG.html",
    "baseUrl": "./",
    "chapters": {
     "root": [
      0
     ],
     "items": [
      {
       "level": "1",
       "heading": "Changelog",
       "hash": "changelog",
       "children": [
        1,
        3,
        5,
        8,
        9,
        13,
        16,
        18,
        19,
        24,
        26,
        29,
        34,
        36,
        38,
        41
       ],
       "id": 0
      },
      {
       "level": "2",
       "heading": "0.8.0-next.8 (2020-12-13)",
       "hash": "080-next8-2020-12-13",
       "children": [
        2
       ],
       "id": 1
      },
      {
       "level": "3",
       "heading": "Bug Fixes",
       "hash": "bug-fixes",
       "children": [],
       "id": 2
      },
      {
       "level": "2",
       "heading": "0.8.0-next.7 (2020-09-16)",
       "hash": "080-next7-2020-09-16",
       "children": [
        4
       ],
       "id": 3
      },
      {
       "level": "3",
       "heading": "Features",
       "hash": "features",
       "children": [],
       "id": 4
      },
      {
       "level": "2",
       "heading": "0.8.0-next.6 (2020-09-16)",
       "hash": "080-next6-2020-09-16",
       "children": [
        6,
        7
       ],
       "id": 5
      },
      {
       "level": "3",
       "heading": "âš  BREAKING CHANGES",
       "hash": "-breaking-changes",
       "children": [],
       "id": 6
      },
      {
       "level": "3",
       "heading": "Features",
       "hash": "features-1",
       "children": [],
       "id": 7
      },
      {
       "level": "2",
       "heading": "0.8.0-next.5 (2020-08-18)",
       "hash": "080-next5-2020-08-18",
       "children": [],
       "id": 8
      },
      {
       "level": "2",
       "heading": "0.8.0-next.4 (2020-08-18)",
       "hash": "080-next4-2020-08-18",
       "children": [
        10,
        11,
        12
       ],
       "id": 9
      },
      {
       "level": "3",
       "heading": "âš  BREAKING CHANGES",
       "hash": "-breaking-changes-1",
       "children": [],
       "id": 10
      },
      {
       "level": "3",
       "heading": "Features",
       "hash": "features-2",
       "children": [],
       "id": 11
      },
      {
       "level": "3",
       "heading": "Bug Fixes",
       "hash": "bug-fixes-1",
       "children": [],
       "id": 12
      },
      {
       "level": "2",
       "heading": "0.8.0-next.3 (2020-08-09)",
       "hash": "080-next3-2020-08-09",
       "children": [
        14,
        15
       ],
       "id": 13
      },
      {
       "level": "3",
       "heading": "âš  BREAKING CHANGES",
       "hash": "-breaking-changes-2",
       "children": [],
       "id": 14
      },
      {
       "level": "3",
       "heading": "Features",
       "hash": "features-3",
       "children": [],
       "id": 15
      },
      {
       "level": "2",
       "heading": "0.8.0-next.2 (2020-08-05)",
       "hash": "080-next2-2020-08-05",
       "children": [
        17
       ],
       "id": 16
      },
      {
       "level": "3",
       "heading": "Bug Fixes",
       "hash": "bug-fixes-2",
       "children": [],
       "id": 17
      },
      {
       "level": "2",
       "heading": "0.8.0-next.1 (2020-08-05)",
       "hash": "080-next1-2020-08-05",
       "children": [],
       "id": 18
      },
      {
       "level": "2",
       "heading": "0.8.0-next.0 (2020-08-03)",
       "hash": "080-next0-2020-08-03",
       "children": [
        20,
        21,
        22,
        23
       ],
       "id": 19
      },
      {
       "level": "3",
       "heading": "âš  BREAKING CHANGES",
       "hash": "-breaking-changes-3",
       "children": [],
       "id": 20
      },
      {
       "level": "3",
       "heading": "Features",
       "hash": "features-4",
       "children": [],
       "id": 21
      },
      {
       "level": "3",
       "heading": "0.7.2 (2020-07-25)",
       "hash": "072-2020-07-25",
       "children": [],
       "id": 22
      },
      {
       "level": "3",
       "heading": "0.7.1 (2020-07-18)",
       "hash": "071-2020-07-18",
       "children": [],
       "id": 23
      },
      {
       "level": "2",
       "heading": "0.7.0 (2020-07-17)",
       "hash": "070-2020-07-17",
       "children": [
        25
       ],
       "id": 24
      },
      {
       "level": "3",
       "heading": "Bug Fixes",
       "hash": "bug-fixes-3",
       "children": [],
       "id": 25
      },
      {
       "level": "2",
       "heading": "0.6.0 (2020-07-16)",
       "hash": "060-2020-07-16",
       "children": [
        27,
        28
       ],
       "id": 26
      },
      {
       "level": "3",
       "heading": "âš  BREAKING CHANGES",
       "hash": "-breaking-changes-4",
       "children": [],
       "id": 27
      },
      {
       "level": "3",
       "heading": "Features",
       "hash": "features-5",
       "children": [],
       "id": 28
      },
      {
       "level": "2",
       "heading": "0.5.0 (2020-07-15)",
       "hash": "050-2020-07-15",
       "children": [
        30,
        31,
        32,
        33
       ],
       "id": 29
      },
      {
       "level": "3",
       "heading": "âš  BREAKING CHANGES",
       "hash": "-breaking-changes-5",
       "children": [],
       "id": 30
      },
      {
       "level": "3",
       "heading": "Features",
       "hash": "features-6",
       "children": [],
       "id": 31
      },
      {
       "level": "3",
       "heading": "0.4.1 (2020-06-29)",
       "hash": "041-2020-06-29",
       "children": [],
       "id": 32
      },
      {
       "level": "3",
       "heading": "Bug Fixes",
       "hash": "bug-fixes-4",
       "children": [],
       "id": 33
      },
      {
       "level": "2",
       "heading": "0.4.0 (2020-06-29)",
       "hash": "040-2020-06-29",
       "children": [
        35
       ],
       "id": 34
      },
      {
       "level": "3",
       "heading": "Bug Fixes",
       "hash": "bug-fixes-5",
       "children": [],
       "id": 35
      },
      {
       "level": "2",
       "heading": "0.3.0 (2020-06-29)",
       "hash": "030-2020-06-29",
       "children": [
        37
       ],
       "id": 36
      },
      {
       "level": "3",
       "heading": "Features",
       "hash": "features-7",
       "children": [],
       "id": 37
      },
      {
       "level": "2",
       "heading": "0.2.0 (2020-06-28)",
       "hash": "020-2020-06-28",
       "children": [
        39,
        40
       ],
       "id": 38
      },
      {
       "level": "3",
       "heading": "âš  BREAKING CHANGES",
       "hash": "-breaking-changes-6",
       "children": [],
       "id": 39
      },
      {
       "level": "3",
       "heading": "Features",
       "hash": "features-8",
       "children": [],
       "id": 40
      },
      {
       "level": "2",
       "heading": "0.1.0 (2020-06-11)",
       "hash": "010-2020-06-11",
       "children": [
        42,
        43,
        44
       ],
       "id": 41
      },
      {
       "level": "3",
       "heading": "Features",
       "hash": "features-9",
       "children": [],
       "id": 42
      },
      {
       "level": "3",
       "heading": "0.0.1 (2020-06-10)",
       "hash": "001-2020-06-10",
       "children": [],
       "id": 43
      },
      {
       "level": "3",
       "heading": "Features",
       "hash": "features-10",
       "children": [],
       "id": 44
      }
     ]
    },
    "hasContent": true
   },
   {
    "ext": ".md",
    "isDir": false,
    "path": "CONTRIBUTING.html",
    "name": "CONTRIBUTING.md",
    "title": "Contributing",
    "level": 0,
    "id": 3,
    "htmlPath": "raw/CONTRIBUTING.html",
    "baseUrl": "./",
    "chapters": {
     "root": [
      0
     ],
     "items": [
      {
       "level": "1",
       "heading": "Contributing",
       "hash": "contributing",
       "children": [
        1,
        2
       ],
       "id": 0
      },
      {
       "level": "2",
       "heading": "Building",
       "hash": "building",
       "children": [],
       "id": 1
      },
      {
       "level": "2",
       "heading": "Releasing",
       "hash": "releasing",
       "children": [],
       "id": 2
      }
     ]
    },
    "hasContent": true
   },
   {
    "href": "https://github.com/sossejs/sosse.git",
    "title": "Repository",
    "level": 0,
    "id": 4,
    "hasContent": false
   }
  ],
  "root": [
   0,
   1,
   2,
   3,
   4
  ],
  "activeItemId": 1
 }
});
    </script>
  </body>
</html>
